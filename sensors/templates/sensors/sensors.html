{% extends "main/base.html" %}

{% load static %}

{% block content %}

<div id="container" style="width: 75%; background-color: rgb(210, 243, 156); margin-left: auto; margin-right: auto; margin-top: 2%;"  >
  <canvas id="population-chart" data-url="{% url 'population-chart' %}"></canvas>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>

  $(function () {

    var $populationChart = $("#population-chart");
    $.ajax({
      url: $populationChart.data("url"),
      success: function (data) {

        var ctx = $populationChart[0].getContext("2d");

        dataToPrint = {
          labels: data.data1.labels,
          datasets: [{
            type: 'line',
            label: "Sensor 1",
            data: data.data1.data,
            borderColor: 'rgb(255, 99, 132)',
            tension: 0.5
          }, {
            type: 'line',
            label: "Sensor 2",
            data: data.data2.data,
            borderColor: 'rgb(54, 162, 235)',
            tension: 0.5
          }
          ]
        };
        
        new Chart(ctx, {
          type: 'line',
          data: dataToPrint,
          options: {

            responsive: true,
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: 'Population Bar Chart'
            }
          }
        });

      }
    });

  });

</script>


{% endblock %}